{% extends "diary/base.html" %}
{% load django_bootstrap5 %}
{% load static %}

{% block title %}
    ほーむぺーじ
{% endblock title %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'diary/css/home.css' %}" type="text/css" >
{% endblock extra_css %}

{% block content %}
    <div class="container-home">
        <div class="diary-count-field">
            {% if user.coin.timestamp %}
            <p>日記継続日数: <strong>{{user.coin.num_continue}}日</strong></p>
            <p>総コイン数: <strong>{{user.coin.num}}枚</strong></p>
            {% endif %}
        </div>
        <div class="diary-myself-field mt-5">
            <div class="diary-list row">
                {% for diary in diaries_mine %}
                    <div class="card-container col-12 col-md-6 col-lg-4 mb-3">
                        {% for loc in diary.locations.all %}
                            {% if loc.is_thumbnail %}
                                <div class="card" onclick="zoom_image('{{ loc.image.url }}')">
                                    <div class="card-thumbnail">
                                        <img src="{{ loc.image.url }}" alt="サムネイル" class="thumbnail-img">  <!-- 画像を表示 -->
                                    </div>
                                    <div class="card-body">
                                        <div class="card-locations">
                                            {{ loc.label }}
                                        </div>
                                        <div class="card-explanation">
                                            <div class="diary-date">
                                                {{ diary.date }}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% empty %}
                    <p>まだ日記が登録されていません</p>
                    <a href="{% url 'diary:diary_photo' %}">日記作成はここから</a>
                {% endfor %}
            </div>
        </div>
        <div class="modal fade" id="imageModalContainer" tabindex="-1" role="dialog" aria-labelledby="imageModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <img id="modalImage" src="" alt="サムネイル拡大表示" class="zoom_image">  <!-- モーダルで表示する画像 -->
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}

{% block extra_js %}
    <script src="{% static 'diary/js/getCookie.js' %}"></script>
    <script src="{% static 'diary/js/loading_overlay.js' %}"></script>
    <script src="{% static 'diary/js/home.js' %}"></script>
{% endblock %}